<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buba Wiki</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
</head>
<body>
    <div class="parchment">
        <header>
            <h1 class="medieval-title">Buba Wiki</h1>
            <nav>
                <button onclick="createNewPage()" class="medieval-button">Create New Page</button>
                <button onclick="showAllPages()" class="medieval-button">Show All Pages</button>
                <button onclick="savePageAs()" class="medieval-button">Save As...</button>
                <button onclick="deletePage()" class="medieval-button danger">Delete Page</button>
            </nav>
        </header>
        
        <main id="mainContent">
            <div id="pageList" style="display: none;">
                <h2>Wiki Pages</h2>
                <ul id="wikiPages"></ul>
            </div>
            
            <div id="pageContent">
                <h2 id="pageTitle">Welcome to Buba Wiki</h2>
            <div class="page-layout">
                <div id="infobox" class="infobox" style="display: none;">
                    <div class="infobox-editor">
                        <select id="infoboxTypeSelect" onchange="changeInfoboxType()" class="medieval-select">
                            <option value="character">Character</option>
                            <option value="location">Location</option>
                            <option value="item">Item</option>
                            <option value="event">Event</option>
                            <option value="creature">Creature</option>
                            <option value="region">Region</option>
                            <option value="nation">Nation</option>
                            <option value="dominion">Dominion</option>
                        </select>
                        <div class="infobox-image">
                            <img id="infoboxImage" src="" alt="Page Image">
                            <button onclick="changeInfoboxImage()" class="medieval-button small">Change Image</button>
                        </div>
                        <div id="infoboxFields" class="infobox-content">
                            <!-- Character Fields -->
                            <div class="infobox-type character">
                                <div class="infobox-field">
                                    <label>Name:</label>
                                    <input type="text" class="medieval-input" id="characterName">
                                </div>
                                <div class="infobox-field">
                                    <label>Nation:</label>
                                    <input type="text" class="medieval-input" id="characterTitle">
                                </div>
                                <div class="infobox-field">
                                    <label>Race:</label>
                                    <input type="text" class="medieval-input" id="characterRace">
                                </div>
                                <div class="infobox-field">
                                    <label>Class:</label>
                                    <input type="text" class="medieval-input" id="characterClass">
                                </div>
                            </div>
                            <!-- Location Fields -->
                            <div class="infobox-type location" style="display: none;">
                                <div class="infobox-field">
                                    <label>Name:</label>
                                    <input type="text" class="medieval-input" id="locationName">
                                </div>
                                <div class="infobox-field">
                                    <label>Type:</label>
                                    <input type="text" class="medieval-input" id="locationType">
                                </div>
                                <div class="infobox-field">
                                    <label>Region:</label>
                                    <input type="text" class="medieval-input" id="locationRegion">
                                </div>
                            </div>
                            <!-- Item Fields -->
                            <div class="infobox-type item" style="display: none;">
                                <div class="infobox-field">
                                    <label>Name:</label>
                                    <input type="text" class="medieval-input" id="itemName">
                                </div>
                                <div class="infobox-field">
                                    <label>Type:</label>
                                    <input type="text" class="medieval-input" id="itemType">
                                </div>
                                <div class="infobox-field">
                                    <label>Rarity:</label>
                                    <select class="medieval-select" id="itemRarity">
                                        <option value="common">Common</option>
                                        <option value="uncommon">Uncommon</option>
                                        <option value="rare">Rare</option>
                                        <option value="legendary">Legendary</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Region Fields -->
                            <div class="infobox-type region" style="display: none;">
                                <div class="infobox-field">
                                    <label>Region Name:</label>
                                    <input type="text" class="medieval-input" id="regionName">
                                </div>
                                <div class="infobox-field">
                                    <label>Climate:</label>
                                    <select class="medieval-select" id="regionClimate">
                                        <option value="temperate">Temperate</option>
                                        <option value="tropical">Tropical</option>
                                        <option value="arctic">Arctic</option>
                                        <option value="desert">Desert</option>
                                        <option value="mountain">Mountain</option>
                                    </select>
                                </div>
                                <div class="infobox-field">
                                    <label>Terrain:</label>
                                    <input type="text" class="medieval-input" id="regionTerrain">
                                </div>
                                <div class="infobox-field">
                                    <label>Notable Features:</label>
                                    <input type="text" class="medieval-input" id="regionFeatures">
                                </div>
                                <div class="infobox-field">
                                    <label>Controlling Nation:</label>
                                    <input type="text" class="medieval-input" id="regionNation">
                                </div>
                            </div>
                            <!-- Nation Fields -->
                            <div class="infobox-type nation" style="display: none;">
                                <div class="infobox-field">
                                    <label>Nation Name:</label>
                                    <input type="text" class="medieval-input" id="nationName">
                                </div>
                                <div class="infobox-field">
                                    <label>Notable Characters:</label>
                                    <input type="text" class="medieval-input" id="nationRuler">
                                </div>
                                <div class="infobox-field">
                                    <label>Major Cities:</label>
                                    <input type="text" class="medieval-input" id="nationCities">
                                </div>
                            </div>
                            <!-- Dominion Fields -->
                            <div class="infobox-type dominion" style="display: none;">
                                <div class="infobox-field">
                                    <label>Empire:</label>
                                    <input type="text" class="medieval-input" id="Nation">
                                </div>
                                <div class="infobox-field">
                                    <label>Dominion Name:</label>
                                    <input type="text" class="medieval-input" id="dominionName">
                                </div>
                                <div class="infobox-field">
                                    <label>Territory Size:</label>
                                    <select class="medieval-select" id="dominionSize">
                                        <option value="small">Small Territory</option>
                                        <option value="medium">Medium Territory</option>
                                        <option value="large">Large Territory</option>
                                        <option value="vast">Vast Empire</option>
                                    </select>
                                </div>
                                <div class="infobox-field">
                                    <label>Population:</label>
                                    <input type="text" class="medieval-input" id="dompop">
                                </div>
                                <div class="infobox-field">
                                    <label>Military Strength:</label>
                                    <input type="text" class="medieval-input" id="dommil">
                                </div>
                                <div class="infobox-field">
                                    <label>Resources:</label>
                                    <input type="text" class="medieval-input" id="dominionResources" placeholder="Major resources and trade goods">
                                </div>
                                <div class="infobox-field">
                                    <label>Alliances:</label>
                                    <input type="text" class="medieval-input" id="dominionAlliances" placeholder="Major allies and trade partners">
                                </div>
                                <div class="infobox-field">
                                    <label>Rivals:</label>
                                    <input type="text" class="medieval-input" id="dominionRivals" placeholder="Major rivals and enemies">
                                </div>
                                <div class="infobox-field">
                                    <label>Political System:</label>
                                    <select class="medieval-select" id="dominionPolitics">
                                        <option value="feudal">Feudal System</option>
                                        <option value="imperial">Imperial Rule</option>
                                        <option value="council">Council of Lords</option>
                                        <option value="merchant">Merchant Republic</option>
                                        <option value="tribal">Tribal Federation</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="infobox-field">
                            <label>Description:</label>
                            <textarea class="medieval-textarea" id="infoboxDescription" rows="4"></textarea>
                        </div>
                    </div>
                </div>
                <div id="contentArea">
                    <p>Welcome, brave adventurer, to our magical repository of knowledge! Here you shall find tales of wonder, ancient lore, and mystical secrets.</p>
                    <p>Choose your path:</p>
                    <ul>
                        <li>Create a new chronicle</li>
                        <li>Explore existing tales</li>
                        <li>Share your own legends</li>
                    </ul>
                </div>
            </div>
            <div id="editorControls" style="display: none;" class="editor-controls">
                <div class="editor-group">
                    <button onclick="formatText('bold')" class="editor-button" title="Bold"><strong>B</strong></button>
                    <button onclick="formatText('italic')" class="editor-button" title="Italic"><em>I</em></button>
                    <button onclick="formatText('underline')" class="editor-button" title="Underline"><u>U</u></button>
                    <button onclick="insertPageLink()" class="editor-button" title="Insert Page Link">🔗</button>
                </div>
                <!-- Page Link Dialog -->
                <div id="linkDialog" class="link-dialog" style="display: none;">
                    <div class="link-dialog-content">
                        <h3>Insert Page Link</h3>
                        <div class="link-search">
                            <input type="text" id="linkSearch" class="medieval-input" placeholder="Search pages..." oninput="searchPages(this.value)">
                            <div id="searchResults" class="search-results"></div>
                        </div>
                        <div class="link-dialog-buttons">
                            <button onclick="closeDialog()" class="medieval-button">Cancel</button>
                        </div>
                    </div>
                </div>
                <div class="editor-group">
                    <button onclick="formatList('bullet')" class="editor-button" title="Bullet List">• List</button>
                    <button onclick="formatList('number')" class="editor-button" title="Numbered List">1. List</button>
                </div>
                <div class="editor-group">
                    <button onclick="toggleInfobox()" class="editor-button" title="Toggle Infobox">Infobox</button>
                    <button onclick="createInfobox()" class="editor-button" title="Create New Infobox">+ New Infobox</button>
                </div>
                <div class="editor-group">
                    <button onclick="saveDraft()" class="editor-button" title="Save Draft">Save Draft</button>
                    <button onclick="loadDraft()" class="editor-button" title="Load Draft">Load Draft</button>
                </div>
            </div>
            <button onclick="toggleEdit()" class="medieval-button" id="editButton">Edit This Page</button>
            </div>
        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>
